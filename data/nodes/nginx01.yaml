---
nginx::nginx_upstreams:
  'KubernetesFARM':
    ensure: present
    members:
      '192.168.1.206:30201':
        server: '192.168.1.206'
        port: 30201
      '192.168.1.207:30201':
        server: '192.168.1.207'
        port: 30201
  'JENKINS':
    ensure: present
    members:
      '192.168.1.201:8080':
        server: '192.168.1.201'
        port: 8080
  'VAULT':
    ensure: present
    members:
      '192.168.1.215:8200':
        server: '192.168.1.215'
        port: 8200
  'NGINX':
    ensure: present
    members:
      'localhost:80':
        server: 'localhost'
        port: 80
  'HIYOFARM':
    ensure: present
    members:
      '192.168.1.206:30000':
        server: '192.168.1.206'
        port: 30000
      '192.168.1.207:30000':
        server: '192.168.1.207'
        port: 30000

nginx::nginx_servers:
  'toolr.ca':
    listen_port: 80
  '*.k8s.toolr.ca':
    listen_port: 80
  jenkins.toolr.ca:
    listen_port: 80
  nginx01.toolr.ca:
    listen_port: 80
  vault.toolr.ca:
    listen_port: 80
  hiyo.app:
    listen_port: 443
    ssl: true
    ssl_cert: '/etc/nginx/ssl/hiyoapp.crt'
    ssl_key: '/etc/nginx/ssl/hiyoapp.key'
    ssl_protocols: 'TLSv1.2'
  toolr.vertexcloudplatform.com:
    listen_port: 443
    ssl: true
    ssl_cert: '/etc/letsencrypt/live/vertexcloudplatform.com/fullchain.pem'
    ssl_key: '/etc/letsencrypt/live/vertexcloudplatform.com/privkey.pem'
    ssl_protocols: 'TLSv1.2'

nginx::nginx_locations:
  hello-world-one:
    location: '~* /'
    server: '*.k8s.toolr.ca'
    proxy: http://KubernetesFARM
  jenkins:
    location: '~* /'
    server: jenkins.toolr.ca
    proxy: http://JENKINS
  vault:
    location: '~* /'
    server: vault.toolr.ca
    proxy: http://VAULT
  kubernetes:
    location: '~* /'
    server: toolr.ca
    proxy: http://KubernetesFARM
  nginx_ping:
    location: '/nginx-health'
    server: nginx01.toolr.ca
    proxy: http://NGINX
    location_cfg_append:
      add_header: '"Content-Type" "application/json"'
      return: '200 "healthy"'
  hiyo:
    location: '~* /'
    ssl_only: true
    server: hiyo.app
    proxy: http://HIYOFARM
  toolr-vertexcloudplatform:
    location: '~* /'
    server: toolr.vertexcloudplatform.com
    proxy: http://KubernetesFARM