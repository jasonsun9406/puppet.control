---
nginx::nginx_upstreams:
  'TESTFARM1':
    ensure: present
    members:
      '192.168.1.206:30005':
        server: '192.168.1.206'
        port: 30005
  'JENKINS':
    ensure: present
    members:
      '192.168.1.201:8080':
        server: '192.168.1.201'
        port: 8080
  'NGINX':
    ensure: present
    members:
      'localhost:80':
        server: 'localhost'
        port: 80

nginx::nginx_servers:
  'toolr.ca':
    listen_port: 80
  '*.k8s.toolr.ca':
    listen_port: 80
  jenkins.toolr.ca:
    listen_port: 80
  nginx01.toolr.ca:
    listen_port: 80

nginx::nginx_locations:
  hello-world-one:
    location: '~* /'
    server: '*.k8s.toolr.ca'
    proxy: http://TESTFARM1
  jenkins:
    location: '~* /'
    server: jenkins.toolr.ca
    proxy: http://JENKINS
  toolr:
    location: '~* /'
    server: toolr.ca
    proxy: http://TESTFARM1
  nginx_ping:
    location: '/nginx-health'
    server: nginx01.toolr.ca
    proxy: http://NGINX
    location_cfg_append:
      stub_status: ''
